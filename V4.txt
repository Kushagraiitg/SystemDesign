Non-Relational DBs
- Not relationally structured
- Give options to horizontal scale and availability by providing eventual consistency
- no complete downtime almost never
- sharding -> scaling

Document DBs (MongoDB, ElasticSearch)
- Mostly json based
- supports complex queries
- Partial updates to documents available
- closest to relation DBs like a generic RDB

Key Value Store (Redis, DynamoDB, Aerospike)
- Key wise access pattern -> makes sharding easy
- so heavily partitioned
- complex queries not supported
- cross partition operations are expensive

Column Oriented DBs (Redshift)
- utilize the query pattern of users
- eg stock ticks
- for queries like avg(price), lookup is very easy
- more oppurtunities to compress, 29X kinda, cause of homogeneous nature of data
Foundational paper : C-store

Graph DB
- stores data in node and edges
- for social behaviours and recommendations
- store adjacency relationship
- specialized in graph operations
eg: Neo4j, Neptune, DGraph, TigerGraph 

Why non-relational DBs scale
- There are no relations
- data can be denormalized
- data is modelled to be sharded

When SQL
	- ACID  
	- relation, constraints
	
When noSQL
	- No relation
	- data can be denormalized
	
	
Designing: Slack's realtime communication-Text
	Requirements:
		Multiple users, multiple channels
		User DM or message in channel
		Real-time chat
		Historical messages can be scrolled through
		
	Schemas
		users-id,name
		channels-id,org,name,type
		membership-user_id,channel_id,checkpoint
		messages- from,channel_id,created_at,msg
		
	 Type of persistence based on type of usecase
	 	Need persistence: http->store->broadcast
	 	Dont need realtime persistence: WS->user + batch write
	 	Dont need persistence: Send via WS
	 	
	 Scaling WS
	 	Low Latency, persistent connection, expensive TCP connection
	 	If server has 4, and ids A.B,C,D,E
	 		A subscribes C1
	 		B
	 		C
	 		D
	 		E subscribes C1
	 		
	 	If every WS needs to connect to all other, wasting lots to discuss
	 	instead introduce a realtime pub-sub(maybe Redis)
	 	




